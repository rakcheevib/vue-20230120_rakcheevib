# refHistory

üë∑üèª _–ó–∞–¥–∞—á–∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏_\
üìö _–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞_

<!--start_statement-->

–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `refHistory` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

- –ü–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏:
  - `source` - –∏—Å—Ö–æ–¥–Ω–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (`ref`)
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
  - –û–±—ä–µ–∫—Ç `{ history }`, –≥–¥–µ `history` - `ref` —Å –º–∞—Å—Å–∏–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–π `source`.

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `source`, –≤ `history` –¥–æ–ª–∂–Ω–æ —Å—Ä–∞–∑—É **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –Ω–æ–≤–æ–µ
–∑–Ω–∞—á–µ–Ω–∏–µ.

–ì–ª—É–±–æ–∫–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ `value`.

–î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–Ω—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è `flush`, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è.

–í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –æ–±—ä–µ–∫—Ç, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤ –±—É–¥—É—â–µ–º –ø—Ä–æ—â–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ —É—Ç–∏–ª–∏—Ç—É,
–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–æ–¥—ã `undo`, `redo` —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—Ä–∏–µ–π.

```javascript
// –ü—Ä–∏–º–µ—Ä

const foo = ref(0);
foo.value = 1;

const { history } = refHistory(foo); // –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - 1

console.log(history.value); // [1]

foo.value = 2;
foo.value = 3;

// –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–∏–ª–∞—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∂–¥–∞—Ç—å nextTick()
console.log(history.value); // [1, 2, 3]
```

<img src="https://i.imgur.com/SR8nk0l.gif" alt="Example" />

<!--end_statement-->

---

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

üìù –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª: `utils/refHistory.js`.

üöÄ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: `npm run serve`;\
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ [http://localhost:8080/08-reactivity/03-refHistory/](http://localhost:8080/08-reactivity/03-refHistory/).

‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `npm test refHistory`.
